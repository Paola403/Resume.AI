{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5" style="max-width: 550px;">
    <div class="card shadow-sm p-4">

        <h3 class="text-center mb-4">Alterar Senha</h3>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} text-center">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <form method="POST">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label"><strong id="label-senha">Senha Atual</strong></label>
                <input type="password" name="senha_atual" id="senha_atual" class="form-control">
            </div>

            <div class="mb-3">
                <label class="form-label"><strong>Nova Senha</strong></label>
                <input type="password" name="nova_senha" class="form-control">
            </div>

            <div class="mb-3">
                <label class="form-label"><strong>Confirmar Nova Senha</strong></label>
                <input type="password" name="confirmar_senha" class="form-control">
            </div>

            <div class="d-flex justify-content-between mt-4">
                <button type="submit" class="btn btn-primary px-4">Salvar</button>
                <a href="{% url 'configuracoes_conta' %}" class="btn btn-secondary px-4">Cancelar</a>
            </div>

            <div class="mt-4 text-center">
                <button type="button" id="btn-esqueci" class="btn btn-link p-0" style="font-size: 0.9rem;">
                    Esqueceu sua senha?
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    // Troca o campo de senha atual por "código de verificação"
    document.getElementById("btn-esqueci").addEventListener("click", function () {
        document.getElementById("label-senha").textContent = "Código de Verificação";
        document.getElementById("senha_atual").placeholder = "Digite o código recebido";
        this.textContent = "Código enviado! Verifique seu email";
        this.disabled = true;
    });
</script>

{% endblock %}
